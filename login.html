<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login - Graphura</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  }

  body {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f5f5f5;
  }

  .container {
    width: 400px;
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    padding: 40px 35px;
  }

  .logo {
    text-align: center;
    margin-bottom: 30px;
  }

  .logo h1 {
    font-size: 32px;
    font-weight: 700;
    background: linear-gradient(135deg, #e63946 0%, #c1121f 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 8px;
    letter-spacing: -0.5px;
  }

  .logo p {
    font-size: 14px;
    color: #666;
  }

  .toggle-container {
    display: flex;
    background: #f0f0f0;
    border-radius: 8px;
    padding: 4px;
    margin-bottom: 30px;
  }

  .toggle-btn {
    flex: 1;
    padding: 10px;
    text-align: center;
    border: none;
    background: transparent;
    color: #666;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s;
  }

  .toggle-btn.active {
    background: #e63946;
    color: #ffffff;
  }

  .form-container {
    display: none;
  }

  .form-container.active {
    display: block;
  }

  .field {
    margin-bottom: 20px;
  }

  .field label {
    display: block;
    font-size: 14px;
    margin-bottom: 8px;
    color: #333;
    font-weight: 500;
  }

  .field input {
    width: 100%;
    padding: 12px 16px;
    border-radius: 8px;
    border: 2px solid #e0e0e0;
    font-size: 15px;
    transition: all 0.2s;
  }

  .field input:focus {
    border-color: #e63946;
    outline: none;
    box-shadow: 0 0 0 3px rgba(230, 57, 70, 0.1);
  }

  .field select {
    width: 100%;
    padding: 12px 16px;
    border-radius: 8px;
    border: 2px solid #e0e0e0;
    font-size: 15px;
    background: #ffffff;
    cursor: pointer;
    transition: all 0.2s;
  }

  .field select:focus {
    border-color: #e63946;
    outline: none;
    box-shadow: 0 0 0 3px rgba(230, 57, 70, 0.1);
  }

  .btn {
    width: 100%;
    padding: 12px 0;
    border: none;
    border-radius: 8px;
    background: #e63946;
    color: #ffffff;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 10px;
    transition: all 0.2s;
  }

  .btn:hover {
    background: #c1121f;
  }

  .btn:disabled {
    background: #ccc;
    cursor: not-allowed;
  }

  .success-message {
    background-color: #e8f5e9;
    color: #2e7d32;
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 20px;
    font-size: 14px;
    display: none;
  }

  .success-message.show {
    display: block;
  }

  .error-message {
    background-color: #ffebee;
    color: #d32f2f;
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 20px;
    font-size: 14px;
    display: none;
  }

  .error-message.show {
    display: block;
  }

  .demo-accounts {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #e0e0e0;
  }

  .demo-accounts h3 {
    font-size: 14px;
    font-weight: 600;
    color: #666;
    margin-bottom: 12px;
    text-align: center;
  }

  .demo-account-item {
    background: #f8f9fa;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .demo-account-item:hover {
    background: #f0f0f0;
    border-color: #e63946;
    transform: translateX(2px);
  }

  .demo-account-item:last-child {
    margin-bottom: 0;
  }

  .demo-account-role {
    font-size: 12px;
    font-weight: 600;
    color: #e63946;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .demo-account-details {
    font-size: 12px;
    color: #666;
    line-height: 1.6;
  }

  .demo-account-details strong {
    color: #333;
    font-weight: 600;
  }

  /* Responsive Styles */
  @media (max-width: 480px) {
    .container {
      width: calc(100% - 40px);
      margin: 20px;
      padding: 30px 25px;
    }

    .logo h1 {
      font-size: 28px;
    }

    .demo-accounts {
      margin-top: 20px;
      padding-top: 15px;
    }

    .demo-account-item {
      padding: 10px;
    }

    .demo-account-details {
      font-size: 11px;
    }
  }

</style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <h1>Graphura</h1>
      <p id="form-title">Sign in to your account</p>
    </div>

    <div class="toggle-container">
      <button class="toggle-btn active" id="login-toggle">Login</button>
      <button class="toggle-btn" id="signup-toggle">Sign Up</button>
    </div>

    <div class="error-message" id="error-message"></div>
    <div class="success-message" id="success-message"></div>

    <!-- Login Form -->
    <form id="login-form" class="form-container active">
      <div class="field">
        <label for="login-email">Email</label>
        <input type="email" id="login-email" placeholder="Enter your email" required autocomplete="email" />
      </div>
      <div class="field">
        <label for="login-password">Password</label>
        <input type="password" id="login-password" placeholder="Enter your password" required autocomplete="current-password" />
      </div>
      <button type="submit" class="btn" id="login-btn">Login</button>
    </form>

    <!-- Demo Accounts Section -->
    <div class="demo-accounts" id="demo-accounts">
      <h3>Demo Accounts</h3>
      <div class="demo-account-item" data-email="admin@gmail.com" data-password="admin123">
        <div class="demo-account-role">Admin</div>
        <div class="demo-account-details">
          <strong>Email:</strong> admin@gmail.com<br>
          <strong>Password:</strong> admin123
        </div>
      </div>
      <div class="demo-account-item" data-email="leader@gmail.com" data-password="leader123">
        <div class="demo-account-role">Team Leader</div>
        <div class="demo-account-details">
          <strong>Email:</strong> leader@gmail.com<br>
          <strong>Password:</strong> leader123
        </div>
      </div>
      <div class="demo-account-item" data-email="employee@gmail.com" data-password="employee123">
        <div class="demo-account-role">Employee</div>
        <div class="demo-account-details">
          <strong>Email:</strong> employee@gmail.com<br>
          <strong>Password:</strong> employee123
        </div>
      </div>
    </div>

    <!-- Signup Form -->
    <form id="signup-form" class="form-container">
      <div class="field">
        <label for="signup-name">Full Name</label>
        <input type="text" id="signup-name" placeholder="Enter your full name" required autocomplete="name" />
      </div>
      <div class="field">
        <label for="signup-email">Email</label>
        <input type="email" id="signup-email" placeholder="Enter your email" required autocomplete="email" />
      </div>
      <div class="field">
        <label for="signup-password">Password</label>
        <input type="password" id="signup-password" placeholder="Create a password" required autocomplete="new-password" />
      </div>
      <div class="field">
        <label for="signup-role">Role</label>
        <select id="signup-role" required>
          <option value="">Select a role</option>
          <option value="employee">Employee</option>
          <option value="leader">Team Leader</option>
          <option value="admin">Admin</option>
        </select>
      </div>
      <button type="submit" class="btn" id="signup-btn">Sign Up</button>
    </form>

  </div>

  <script>

    // Initialize all demo data - FORCE UPDATE to ensure accounts always work
    function initializeDemoData() {
      try {
        // Initialize Demo Accounts - ALWAYS ensure these exist with correct credentials
        let users = JSON.parse(localStorage.getItem('users') || '[]');
        
        const demoAccounts = [
          {
            id: 'admin-1',
            email: 'admin@gmail.com',
            password: 'admin123',
            name: 'Admin User',
            role: 'admin'
          },
          {
            id: 'leader-1',
            email: 'leader@gmail.com',
            password: 'leader123',
            name: 'Sarah Johnson',
            role: 'leader'
          },
          {
            id: 'employee-1',
            email: 'employee@gmail.com',
            password: 'employee123',
            name: 'Alex Morgan',
            role: 'employee'
          }
        ];
        
        // Remove any existing demo accounts first (to avoid duplicates)
        users = users.filter(u => 
          u.email !== 'admin@gmail.com' && 
          u.email !== 'leader@gmail.com' && 
          u.email !== 'employee@gmail.com'
        );
        
        // Add demo accounts with correct credentials
        demoAccounts.forEach(demoAccount => {
          users.push({
            id: demoAccount.id,
            email: demoAccount.email,
            password: demoAccount.password,
            name: demoAccount.name,
            role: demoAccount.role
          });
        });
        
        // Save to localStorage
        localStorage.setItem('users', JSON.stringify(users));
        
        // Verify accounts were saved
        const savedUsers = JSON.parse(localStorage.getItem('users') || '[]');
        const adminExists = savedUsers.find(u => u.email === 'admin@gmail.com' && u.password === 'admin123');
        const leaderExists = savedUsers.find(u => u.email === 'leader@gmail.com' && u.password === 'leader123');
        const employeeExists = savedUsers.find(u => u.email === 'employee@gmail.com' && u.password === 'employee123');
        
        if (!adminExists || !leaderExists || !employeeExists) {
          console.error('Demo accounts not properly initialized');
          // Force re-initialize
          localStorage.setItem('users', JSON.stringify(demoAccounts));
        }
      
      // Initialize Demo Teams
      const teams = JSON.parse(localStorage.getItem('teams')) || [];
      const demoTeams = [
        {
          id: 'team-1',
          name: 'Frontend Development Team',
          description: 'Responsible for UI/UX development and frontend architecture',
          leader: 'Sarah Johnson',
          members: [
            { name: 'Sarah Johnson', email: 'leader@gmail.com', role: 'leader' },
            { name: 'Alex Morgan', email: 'employee@gmail.com', role: 'employee' },
            { name: 'Mike Chen', email: 'mike.chen@graphura.com', role: 'employee' },
            { name: 'Emily Davis', email: 'emily.davis@graphura.com', role: 'employee' }
          ],
          createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 'team-2',
          name: 'Backend Development Team',
          description: 'Handles server-side logic, APIs, and database management',
          leader: 'Sarah Johnson',
          members: [
            { name: 'Sarah Johnson', email: 'leader@gmail.com', role: 'leader' },
            { name: 'David Wilson', email: 'david.wilson@graphura.com', role: 'employee' },
            { name: 'Lisa Anderson', email: 'lisa.anderson@graphura.com', role: 'employee' }
          ],
          createdAt: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 'team-3',
          name: 'Full Stack Development Team',
          description: 'End-to-end web application development',
          leader: 'Sarah Johnson',
          members: [
            { name: 'Sarah Johnson', email: 'leader@gmail.com', role: 'leader' },
            { name: 'Alex Morgan', email: 'employee@gmail.com', role: 'employee' },
            { name: 'John Smith', email: 'john.smith@graphura.com', role: 'employee' }
          ],
          createdAt: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString()
        }
      ];
      
      // Update or add demo teams
      demoTeams.forEach(demoTeam => {
        const existingIndex = teams.findIndex(t => t.id === demoTeam.id);
        if (existingIndex !== -1) {
          teams[existingIndex] = { ...teams[existingIndex], ...demoTeam };
        } else {
          teams.push(demoTeam);
        }
      });
      
      localStorage.setItem('teams', JSON.stringify(teams));
      
      // Initialize Demo Projects
      const projects = JSON.parse(localStorage.getItem('projects')) || [];
      const demoProjects = [
        {
          id: 1,
          name: 'E-Commerce Platform Redesign',
          description: 'Complete redesign and modernization of the e-commerce platform with React and Node.js',
          status: 'In Progress',
          leader: 'Sarah Johnson',
          teamId: 'team-1',
          progress: 65,
          createdAt: new Date(Date.now() - 45 * 24 * 60 * 60 * 1000).toISOString(),
          deadline: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 2,
          name: 'RESTful API Development',
          description: 'Building scalable REST APIs for mobile and web applications',
          status: 'In Progress',
          leader: 'Sarah Johnson',
          teamId: 'team-2',
          progress: 80,
          createdAt: new Date(Date.now() - 40 * 24 * 60 * 60 * 1000).toISOString(),
          deadline: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 3,
          name: 'Task Management Dashboard',
          description: 'Modern task management system with real-time updates and collaboration features',
          status: 'In Progress',
          leader: 'Sarah Johnson',
          teamId: 'team-3',
          progress: 45,
          createdAt: new Date(Date.now() - 35 * 24 * 60 * 60 * 1000).toISOString(),
          deadline: new Date(Date.now() + 45 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 4,
          name: 'Responsive Website Migration',
          description: 'Migrating legacy website to modern responsive design with mobile-first approach',
          status: 'In Progress',
          leader: 'Sarah Johnson',
          teamId: 'team-1',
          progress: 90,
          createdAt: new Date(Date.now() - 50 * 24 * 60 * 60 * 1000).toISOString(),
          deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 5,
          name: 'Database Optimization',
          description: 'Optimizing database queries and implementing caching strategies',
          status: 'Completed',
          leader: 'Sarah Johnson',
          teamId: 'team-2',
          progress: 100,
          createdAt: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString(),
          deadline: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString()
        }
      ];
      
      // Update or add demo projects
      demoProjects.forEach(demoProject => {
        const existingIndex = projects.findIndex(p => p.id === demoProject.id);
        if (existingIndex !== -1) {
          projects[existingIndex] = { ...projects[existingIndex], ...demoProject };
        } else {
          projects.push(demoProject);
        }
      });
      
      localStorage.setItem('projects', JSON.stringify(projects));
      
      // Initialize Demo Tasks
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      const demoTasks = [
        {
          id: 1,
          title: 'Design User Authentication Flow',
          description: 'Create login, signup, and password reset UI components with validation',
          projectId: 1,
          assignedTo: 'Alex Morgan',
          status: 'In Progress',
          priority: 'High',
          dueDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 2,
          title: 'Implement Shopping Cart Functionality',
          description: 'Build cart management with add, remove, and update quantity features',
          projectId: 1,
          assignedTo: 'Alex Morgan',
          status: 'Pending',
          priority: 'High',
          dueDate: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 3,
          title: 'Create Product API Endpoints',
          description: 'Develop RESTful endpoints for product CRUD operations',
          projectId: 2,
          assignedTo: 'David Wilson',
          status: 'Completed',
          priority: 'Medium',
          dueDate: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 4,
          title: 'Setup Database Schema',
          description: 'Design and implement database tables for user management',
          projectId: 2,
          assignedTo: 'Lisa Anderson',
          status: 'In Progress',
          priority: 'High',
          dueDate: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 5,
          title: 'Build Task List Component',
          description: 'Create reusable task list component with drag-and-drop functionality',
          projectId: 3,
          assignedTo: 'Alex Morgan',
          status: 'In Progress',
          priority: 'Medium',
          dueDate: new Date(Date.now() + 20 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 6,
          title: 'Implement Real-time Notifications',
          description: 'Add WebSocket support for real-time task updates and notifications',
          projectId: 3,
          assignedTo: 'John Smith',
          status: 'Pending',
          priority: 'Low',
          dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 7,
          title: 'Mobile Responsive Design',
          description: 'Ensure all pages are fully responsive for mobile devices',
          projectId: 4,
          assignedTo: 'Mike Chen',
          status: 'Completed',
          priority: 'High',
          dueDate: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 8,
          title: 'Performance Testing',
          description: 'Conduct load testing and optimize page load times',
          projectId: 4,
          assignedTo: 'Emily Davis',
          status: 'In Progress',
          priority: 'Medium',
          dueDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 9,
          title: 'Query Optimization',
          description: 'Optimize slow database queries and add proper indexing',
          projectId: 5,
          assignedTo: 'David Wilson',
          status: 'Completed',
          priority: 'High',
          dueDate: new Date(Date.now() - 12 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          id: 10,
          title: 'Implement Redis Caching',
          description: 'Setup Redis cache for frequently accessed data',
          projectId: 5,
          assignedTo: 'Lisa Anderson',
          status: 'Completed',
          priority: 'Medium',
          dueDate: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
          createdAt: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString(),
          createdDate: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString()
        }
      ];
      
      // Update or add demo tasks
      demoTasks.forEach(demoTask => {
        const existingIndex = tasks.findIndex(t => t.id === demoTask.id);
        if (existingIndex !== -1) {
          tasks[existingIndex] = { ...tasks[existingIndex], ...demoTask };
        } else {
          tasks.push(demoTask);
        }
      });
      
      localStorage.setItem('tasks', JSON.stringify(tasks));
      
      // Initialize Demo Billing Data
      const billingData = JSON.parse(localStorage.getItem('billingData')) || {
        invoices: [
          {
            id: 'INV-2024-001',
            client: 'Tech Solutions Inc.',
            project: 'E-Commerce Platform Redesign',
            amount: 15000,
            status: 'Paid',
            date: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
            dueDate: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString()
          },
          {
            id: 'INV-2024-002',
            client: 'Digital Marketing Agency',
            project: 'RESTful API Development',
            amount: 12000,
            status: 'Pending',
            date: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
            dueDate: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString()
          },
          {
            id: 'INV-2024-003',
            client: 'StartupXYZ',
            project: 'Task Management Dashboard',
            amount: 18000,
            status: 'Paid',
            date: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
            dueDate: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString()
          }
        ],
        revenue: {
          total: 45000,
          thisMonth: 15000,
          lastMonth: 30000
        },
        expenses: {
          total: 12000,
          thisMonth: 4000,
          lastMonth: 8000
        }
      };
      
      localStorage.setItem('billingData', JSON.stringify(billingData));
    }
    
    // Initialize all demo data on page load
    // Run immediately
    initializeDemoData();
    
    // Also ensure it runs when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeDemoData);
    }

    // Wait for DOM to be ready before setting up event listeners
    document.addEventListener('DOMContentLoaded', function() {
      // Get all form elements
    const loginToggle = document.getElementById('login-toggle');
    const signupToggle = document.getElementById('signup-toggle');
    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    const formTitle = document.getElementById('form-title');
    const errorMessage = document.getElementById('error-message');
    const successMessage = document.getElementById('success-message');
      const demoAccountsSection = document.getElementById('demo-accounts');
      const emailInput = document.getElementById('login-email');
      const passwordInput = document.getElementById('login-password');
      const signupNameInput = document.getElementById('signup-name');
      const signupEmailInput = document.getElementById('signup-email');
      const signupPasswordInput = document.getElementById('signup-password');
      const signupRoleInput = document.getElementById('signup-role');

      // Demo account click handlers
      const demoAccountItems = document.querySelectorAll('.demo-account-item');
      demoAccountItems.forEach(item => {
        item.addEventListener('click', function() {
          const email = this.getAttribute('data-email');
          const password = this.getAttribute('data-password');
          
          // Switch to login form if not already active
          if (!loginForm.classList.contains('active')) {
            loginToggle.click();
          }
          
          // Fill in the credentials
          emailInput.value = email;
          passwordInput.value = password;
          
          // Highlight the input fields briefly
          emailInput.focus();
          setTimeout(() => {
            passwordInput.focus();
          }, 200);
        });
      });

      // Toggle between login and signup
      loginToggle.addEventListener('click', function() {
        loginToggle.classList.add('active');
        signupToggle.classList.remove('active');
        loginForm.classList.add('active');
        signupForm.classList.remove('active');
        if (demoAccountsSection) demoAccountsSection.style.display = 'block';
        formTitle.textContent = 'Sign in to your account';
        errorMessage.classList.remove('show');
        successMessage.classList.remove('show');
      });

      signupToggle.addEventListener('click', function() {
        signupToggle.classList.add('active');
        loginToggle.classList.remove('active');
        signupForm.classList.add('active');
        loginForm.classList.remove('active');
        if (demoAccountsSection) demoAccountsSection.style.display = 'none';
        formTitle.textContent = 'Create your account';
        errorMessage.classList.remove('show');
        successMessage.classList.remove('show');
      });

      // Login form submission
      loginForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const email = emailInput.value.trim();
      const password = passwordInput.value;
      
      // Hide previous messages
      errorMessage.classList.remove('show');
      successMessage.classList.remove('show');
      
      // Ensure demo accounts exist before checking (especially for GitHub Pages)
      const demoEmails = ['admin@gmail.com', 'leader@gmail.com', 'employee@gmail.com'];
      if (demoEmails.includes(email)) {
        // Re-initialize demo accounts if this is a demo account login attempt
        initializeDemoData();
      }
      
      // Get users from localStorage (after potential re-initialization)
      const users = JSON.parse(localStorage.getItem('users') || '[]');
      
      // Find user by email and password
      const user = users.find(u => u.email === email && u.password === password);
      
      if (!user) {
        // If demo account login fails, try one more time to initialize
        if (demoEmails.includes(email)) {
          initializeDemoData();
          const updatedUsers = JSON.parse(localStorage.getItem('users') || '[]');
          const retryUser = updatedUsers.find(u => u.email === email && u.password === password);
          if (retryUser) {
            // Store current user in session
            localStorage.setItem('currentUser', JSON.stringify({
              id: retryUser.id,
              email: retryUser.email,
              name: retryUser.name,
              role: retryUser.role
            }));
            
            // Redirect based on role
            switch(retryUser.role) {
              case 'admin':
                window.location.href = 'admin.html';
                return;
              case 'leader':
                window.location.href = 'team-leader.html';
                return;
              case 'employee':
                window.location.href = 'employee.html';
                return;
            }
          }
        }
        errorMessage.textContent = 'Invalid email or password';
        errorMessage.classList.add('show');
        return;
      }
      
      // Store current user in session
      localStorage.setItem('currentUser', JSON.stringify({
        id: user.id,
        email: user.email,
        name: user.name,
        role: user.role
      }));
      
      // Redirect based on role
      switch(user.role) {
        case 'admin':
          window.location.href = 'admin.html';
          break;
        case 'leader':
          window.location.href = 'team-leader.html';
          break;
        case 'employee':
          window.location.href = 'employee.html';
          break;
        default:
          errorMessage.textContent = 'Unknown user role';
          errorMessage.classList.add('show');
      }
    });

    // Signup form submission
    signupForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const name = signupNameInput.value.trim();
      const email = signupEmailInput.value.trim();
      const password = signupPasswordInput.value;
      const role = signupRoleInput.value;
      
      // Hide previous messages
      errorMessage.classList.remove('show');
      successMessage.classList.remove('show');
      
      // Validation
      if (!name || !email || !password || !role) {
        errorMessage.textContent = 'Please fill in all fields';
        errorMessage.classList.add('show');
        return;
      }

      if (password.length < 6) {
        errorMessage.textContent = 'Password must be at least 6 characters';
        errorMessage.classList.add('show');
        return;
      }
      
      // Get users from localStorage
      const users = JSON.parse(localStorage.getItem('users')) || [];
      
      // Check if email already exists
      const existingUser = users.find(u => u.email === email);
      if (existingUser) {
        errorMessage.textContent = 'Email already registered. Please login instead.';
        errorMessage.classList.add('show');
        return;
      }
      
      // Create new user
      const newUser = {
        id: `${role}-${Date.now()}`,
        email: email,
        password: password,
        name: name,
        role: role
      };
      
      users.push(newUser);
      localStorage.setItem('users', JSON.stringify(users));
      
      // Show success message
      successMessage.textContent = 'Account created successfully! You can now login.';
      successMessage.classList.add('show');
      
      // Clear form
      signupForm.reset();
      
      // Switch to login after 1.5 seconds
        setTimeout(() => {
          loginToggle.click();
          emailInput.value = email;
          passwordInput.value = password;
        }, 1500);
      });
    });
  </script>
</body>
</html>
